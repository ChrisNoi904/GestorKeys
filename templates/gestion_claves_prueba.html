{% extends "layout.html" %}

{% block title %}Gestión de Claves (PRUEBA){% endblock %}

{% block content %}
<h2>Gestión de Claves de Clientes</h2>

<div class="flash info">
    <p><strong>MÓDULO DE PRUEBA ACTIVO:</strong></p>
    <p>El usuario <strong>{{ usuario_actual }}</strong> ha iniciado sesión.</p>
    <p>El filtro aplicado es: <strong>{{ filtro_aplicado }}</strong>.</p>
</div>

{% if current_user.is_admin %}
<p>
    <a href="{{ url_for('asignar_clientes') }}" class="btn btn-info">
        Administración de Asignación de Clientes
    </a>
</p>
{% endif %}

{% if clientes %}
    <h3>Clientes Disponibles (Tabla `clientes_afip`)</h3>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>CUIT</th>
                <th>Razón Social</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for cliente in clientes %}
            <tr>
                <td>{{ cliente.id }}</td>
                <td>{{ cliente.cuit }}</td>
                <td>{{ cliente.razon_social }}</td>
                <td>
                    <button class="btn-primary" disabled>Ver Claves (Funcionalidad Desactivada en Prueba)</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div class="flash warning">
        No se encontraron clientes para el usuario **{{ usuario_actual }}** o la base de datos está vacía.
        <p>Asegúrate de que la tabla `clientes_afip` contenga datos y que el usuario tenga clientes asignados en `usuario_cliente_test` (si no es admin).</p>
    </div>
{% endif %}
{% endblock %}
